<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuickShare - 文件传输</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <style>
        /* 主页特有样式补充 */
        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            color: #4361ee;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
            z-index: 100;
        }
        
        .back-button:hover {
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            .back-button {
                top: 10px;
                left: 10px;
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <!-- 返回按钮 -->
    <a href="../pages/welcome.html" class="back-button">
        ← 返回首页
    </a>
    
    <div class="container">
        <!-- 头部 -->
        <header class="app-header">
            <div class="header-content">
                <h1><i class="icon-share"></i> QuickShare</h1>
                <p class="subtitle">快速安全的文件分享工具</p>
            </div>
        </header>

        <main class="main-layout">
            <!-- 左侧：主要功能 -->
            <div class="primary-section">
                <!-- 上传文件 -->
                <section class="card upload-section">
                    <h2><i class="icon-upload"></i> 1. 上传分享文件</h2>
                    <div class="upload-area" id="dropArea">
                        <div class="upload-icon">📁</div>
                        <p class="upload-text">拖放文件到此处 或 <span class="upload-link">点击选择</span></p>
                        <p class="upload-hint">最大支持 2GB，所有文件类型</p>
                        <input type="file" id="fileInput" class="file-input">
                    </div>
                    <div class="file-info" id="fileInfo" style="display:none">
                        <div class="file-preview" id="preview"></div>
                        <div class="file-details">
                            <span id="fileName"></span>
                            <span id="fileSize"></span>
                        </div>
                    </div>
                    <div class="share-options">
                        <div class="option">
                            <label>有效期：</label>
                            <select id="expireSelect">
                                <option value="5">5分钟</option>
                                <option value="30" selected>30分钟</option>
                                <option value="60">1小时</option>
                                <option value="1440">24小时</option>
                            </select>
                        </div>
                        <div class="option">
                            <label>领取次数：</label>
                            <select id="limitSelect">
                                <option value="1">1次</option>
                                <option value="3" selected>3次</option>
                                <option value="10">10次</option>
                                <option value="999">不限</option>
                            </select>
                        </div>
                    </div>
                    <button id="shareBtn" class="btn btn-primary" disabled>
                        <i class="icon-generate"></i> 生成取件码
                    </button>
                </section>

                <!-- 接收文件 -->
                <section class="card receive-section">
                    <h2><i class="icon-download"></i> 2. 接收文件</h2>
                    <div class="receive-form">
                        <div class="input-group">
                            <input type="text" id="inputCode" placeholder="输入6位取件码" maxlength="6">
                            <button id="receiveBtn" class="btn btn-primary">
                                <i class="icon-receive"></i> 领取
                            </button>
                        </div>
                        <p class="input-hint">输入大写字母或数字，不分大小写</p>
                    </div>
                    <div class="progress-container" id="recvProgressBar" style="display:none">
                        <div class="progress-header">
                            <span>下载进度</span>
                            <span id="progressPercent">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                        </div>
                    </div>
                    <a id="downloadLink" class="download-link" style="display:none">
                        <i class="icon-save"></i> 下载文件
                    </a>
                </section>
            </div>

            <!-- 右侧：辅助功能 -->
            <div class="secondary-section">
                <!-- 取件码状态 -->
                <section class="card code-section" id="codeSec" style="display:none">
                    <h2><i class="icon-code"></i> 取件码状态</h2>
                    <div class="code-display">
                        <div class="code-value" id="pickupCode">XXXXXX</div>
                        <button id="copyCodeBtn" class="btn btn-secondary">
                            <i class="icon-copy"></i> 复制
                        </button>
                    </div>
                    <div class="code-status">
                        <div class="status-item">
                            <span class="status-label">剩余时间：</span>
                            <span class="status-value" id="statTime">30:00</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">文件大小：</span>
                            <span class="status-value" id="statSize">0 MB</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">领取状态：</span>
                            <span class="status-value" id="statCount">0/3</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">当前状态：</span>
                            <span class="status-value" id="statStatus">等待中</span>
                        </div>
                    </div>
                    <button id="reportBtn" class="btn btn-warning">
                        <i class="icon-report"></i> 举报文件
                    </button>
                </section>

                <!-- 连接设置 -->
                <section class="card config-section">
                    <h2><i class="icon-settings"></i> 连接设置</h2>
                    <div class="config-form">
                        <div class="input-group">
                            <label>后端端口：</label>
                            <input type="number" id="portInput" value="8000" min="1" max="65535">
                        </div>
                        <button id="testBtn" class="btn btn-secondary">
                            <i class="icon-test"></i> 测试连接
                        </button>
                        <div class="test-result" id="portResult">
                            <i class="icon-info"></i> 点击测试按钮检查连接
                        </div>
                    </div>
                    <div class="config-tips">
                        <h3><i class="icon-tip"></i> 使用提示</h3>
                        <ul>
                            <li>确保后端服务已启动</li>
                            <li>默认端口为8000</li>
                            <li>连接成功后才能正常使用</li>
                        </ul>
                    </div>
                </section>
            </div>
        </main>

        <!-- 底部信息 -->
        <footer class="app-footer">
            <p>QuickShare 文件闪传系统 © 2023 | 安全 · 快速 · 无需注册</p>
        </footer>
    </div>

    <!-- 使用module方式引入JS -->
    <script type="module" src="/static/js/main.js"></script>
</body>
</html>