<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QuickShare - 文件传输</title>
    <link rel="stylesheet" href="/static/common-style/common.css" />
    <link rel="stylesheet" href="/static/pages/index/index.css" />
    <link rel="stylesheet" href="/static/components/modal/modal.css" />
    <style>
      /* 主页特有样式补充 */
      .back-button {
        position: absolute;
        top: 20px;
        left: 20px;
        color: #4361ee;
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.95rem;
        z-index: 100;
      }

      .back-button:hover {
        text-decoration: underline;
      }

      @media (max-width: 768px) {
        .back-button {
          top: 10px;
          left: 10px;
          font-size: 0.85rem;
        }
      }
    </style>
  </head>
  <body>
    <!-- 返回按钮 -->
    <a href="/static/pages/welcome/welcome.html" class="back-button">
      ← 返回首页
    </a>

    <!-- 用户状态区域 -->
    <div class="user-status" id="userStatus">
      <span class="visitor-text">游客</span>
      <button class="login-btn" id="loginBtn">登录</button>
      <button class="register-btn" id="registerBtn">注册</button>
    </div>

    <div class="container">
      <!-- 头部 -->
      <header class="app-header">
        <div class="header-content">
          <h1><i class="icon-share"></i> QuickShare</h1>
          <p class="subtitle">快速安全的文件分享工具</p>
        </div>
      </header>

      <main class="main-layout">
        <!-- 左侧：主要功能 -->
        <div class="primary-section">
          <!-- 上传文件 -->
          <section class="card upload-section">
            <h2><i class="icon-upload"></i> 1. 上传分享文件</h2>
            <div class="upload-area" id="dropArea">
              <div class="upload-icon">📁</div>
              <p class="upload-text">
                拖放文件到此处 或 <span class="upload-link">点击选择</span>
              </p>
              <p class="upload-hint">最大支持 2GB，所有文件类型</p>
              <input type="file" id="fileInput" class="file-input" />
            </div>
            <div class="file-info" id="fileInfo" style="display: none">
              <div class="file-preview" id="preview"></div>
              <div class="file-details">
                <span id="fileName"></span>
                <span id="fileSize"></span>
              </div>
            </div>
            <div
              class="progress-container"
              id="sendProgressBar"
              style="display: none"
            >
              <div class="progress-header">
                <span>上传进度</span>
                <span id="sendProgressPercent">0%</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" id="sendProgressFill"></div>
              </div>
            </div>
            <div class="upload-complete-badge" id="uploadCompleteBadge">
              文件已成功上传，可以分享取件码了
            </div>
            <div class="share-options">
              <div class="option">
                <label>有效期：</label>
                <select id="expireSelect">
                  <option value="5">5分钟</option>
                  <option value="30" selected>30分钟</option>
                  <option value="60">1小时</option>
                  <option value="1440">24小时</option>
                </select>
              </div>
              <div class="option">
                <label>领取次数：</label>
                <select id="limitSelect">
                  <option value="1">1次</option>
                  <option value="3" selected>3次</option>
                  <option value="10">10次</option>
                  <option value="999">不限</option>
                </select>
              </div>
            </div>
            <button id="shareBtn" class="btn btn-primary" disabled>
              <i class="icon-generate"></i> 生成取件码
            </button>
            <button
              id="invalidateBtn"
              class="btn btn-warning"
              style="display: none; margin-top: 10px"
              title="作废当前文件的取件码"
            >
              <i class="icon-report"></i> 终止文件分享
            </button>
          </section>

          <!-- 接收文件 -->
          <section class="card receive-section">
            <h2><i class="icon-download"></i> 2. 接收文件</h2>
            <div class="receive-form">
              <div class="input-group">
                <input
                  type="text"
                  id="inputCode"
                  placeholder="输入12位取件码"
                  maxlength="12"
                />
                <button id="receiveBtn" class="btn btn-primary">
                  <i class="icon-receive"></i> 领取
                </button>
              </div>
              <p class="input-hint">输入大写字母或数字，不分大小写</p>
            </div>
            <div
              class="progress-container"
              id="recvProgressBar"
              style="display: none"
            >
              <div class="progress-header">
                <span>下载进度</span>
                <span id="progressPercent">0%</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill"></div>
              </div>
            </div>
            <a id="downloadLink" class="download-link" style="display: none">
              <i class="icon-save"></i> 下载文件
            </a>
          </section>

          <!-- 密码哈希测试（已隐藏，仅通过弹窗访问） -->
          <section class="card hash-test-section" style="display: none;">
            <h2><i class="icon-lock"></i> 3. 密码哈希测试</h2>
            <div class="hash-test-area">
              <div class="form-group">
                <label for="hashPasswordInput">输入密码：</label>
                <input
                  type="password"
                  id="hashPasswordInput"
                  placeholder="请输入要测试的密码"
                />
              </div>
              <div class="form-actions">
                <button id="hashPasswordBtn" class="btn btn-primary">
                  <i class="icon-hash"></i> 生成哈希值
                </button>
                <button id="clearHashBtn" class="btn btn-secondary">
                  <i class="icon-clear"></i> 清空
                </button>
              </div>
              <div class="hash-result" id="hashResult" style="display: none">
                <h3>哈希结果：</h3>
                <div class="result-content">
                  <p>
                    <strong>明文密码：</strong><span id="plainPassword"></span>
                  </p>
                  <p>
                    <strong>哈希密码：</strong><span id="hashedPassword"></span>
                  </p>
                  <p>
                    <strong>密码长度：</strong
                    ><span id="passwordLength"></span> 字符
                  </p>
                  <p>
                    <strong>哈希长度：</strong
                    ><span id="hashLength"></span> 字符
                  </p>
                  <p>
                    <strong>执行时间：</strong><span id="hashTime"></span> ms
                  </p>
                </div>
              </div>
            </div>
          </section>
        </div>

        <!-- 右侧：辅助功能（已移除，改为弹窗） -->
      </main>

      <!-- 底部信息 -->
      <footer class="app-footer">
        <p>QuickShare 文件闪传系统 © 2023 | 安全 · 快速 · 无需注册</p>
      </footer>
    </div>

    <!-- 弹窗组件将通过 modal.js 动态加载 -->

    <!-- 使用module方式引入JS -->
    <script type="module" src="/static/pages/index/index.js"></script>
  </body>
</html>
